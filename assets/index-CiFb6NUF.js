(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const xe=!1,Ae=(e,t)=>e===t,j={equals:Ae};let ce=he;const C=1,V=2,ae={owned:null,cleanups:null,context:null,owner:null};var b=null;let Y=null,$e=null,g=null,w=null,$=null,q=0;function Ee(e,t){const n=g,r=b,s=e.length===0,i=t===void 0?r:t,o=s?ae:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=s?e:()=>e(()=>D(()=>O(o)));b=o,g=null;try{return M(l,!0)}finally{g=n,b=r}}function E(e,t){t=t?Object.assign({},j,t):j;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=s=>(typeof s=="function"&&(s=s(n.value)),ge(n,s));return[de.bind(n),r]}function I(e,t,n){const r=Z(e,t,!1,C);B(r)}function X(e,t,n){ce=Pe;const r=Z(e,t,!1,C);r.user=!0,$?$.push(r):B(r)}function Ce(e,t,n){n=n?Object.assign({},j,n):j;const r=Z(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,B(r),de.bind(r)}function D(e){if(g===null)return e();const t=g;g=null;try{return e()}finally{g=t}}function ue(e,t,n){const r=Array.isArray(e);let s;return i=>{let o;if(r){o=Array(e.length);for(let c=0;c<e.length;c++)o[c]=e[c]()}else o=e();const l=D(()=>t(o,s,i));return s=o,l}}function fe(e){X(()=>D(e))}function de(){if(this.sources&&this.state)if(this.state===C)B(this);else{const e=w;w=null,M(()=>H(this),!1),w=e}if(g){const e=this.observers?this.observers.length:0;g.sources?(g.sources.push(this),g.sourceSlots.push(e)):(g.sources=[this],g.sourceSlots=[e]),this.observers?(this.observers.push(g),this.observerSlots.push(g.sources.length-1)):(this.observers=[g],this.observerSlots=[g.sources.length-1])}return this.value}function ge(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&M(()=>{for(let s=0;s<e.observers.length;s+=1){const i=e.observers[s],o=Y&&Y.running;o&&Y.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?w.push(i):$.push(i),i.observers&&_e(i)),o||(i.state=C)}if(w.length>1e6)throw w=[],new Error},!1)),t}function B(e){if(!e.fn)return;O(e);const t=q;Se(e,e.value,t)}function Se(e,t,n){let r;const s=b,i=g;g=b=e;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=C,e.owned&&e.owned.forEach(O),e.owned=null),e.updatedAt=n+1,me(o)}finally{g=i,b=s}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?ge(e,r):e.value=r,e.updatedAt=n)}function Z(e,t,n,r=C,s){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:b,context:b?b.context:null,pure:n};return b===null||b!==ae&&(b.owned?b.owned.push(i):b.owned=[i]),i}function W(e){if(e.state===0)return;if(e.state===V)return H(e);if(e.suspense&&D(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<q);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===C)B(e);else if(e.state===V){const r=w;w=null,M(()=>H(e,t[0]),!1),w=r}}function M(e,t){if(w)return e();let n=!1;t||(w=[]),$?n=!0:$=[],q++;try{const r=e();return Te(n),r}catch(r){n||($=null),w=null,me(r)}}function Te(e){if(w&&(he(w),w=null),e)return;const t=$;$=null,t.length&&M(()=>ce(t),!1)}function he(e){for(let t=0;t<e.length;t++)W(e[t])}function Pe(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:W(r)}for(t=0;t<n;t++)W(e[t])}function H(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const s=r.state;s===C?r!==t&&(!r.updatedAt||r.updatedAt<q)&&W(r):s===V&&H(r,t)}}}function _e(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=V,n.pure?w.push(n):$.push(n),n.observers&&_e(n))}}function O(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),o=n.observerSlots.pop();r<s.length&&(i.sourceSlots[o]=r,s[r]=i,n.observerSlots[r]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)O(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)O(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Le(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function me(e,t=b){throw Le(e)}function p(e,t){return D(()=>e(t||{}))}const Q=e=>Ce(()=>e());function Re(e,t,n){let r=n.length,s=t.length,i=r,o=0,l=0,c=t[s-1].nextSibling,u=null;for(;o<s||l<i;){if(t[o]===n[l]){o++,l++;continue}for(;t[s-1]===n[i-1];)s--,i--;if(s===o){const f=i<r?l?n[l-1].nextSibling:n[i-l]:c;for(;l<i;)e.insertBefore(n[l++],f)}else if(i===l)for(;o<s;)(!u||!u.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[i-1]&&n[l]===t[s-1]){const f=t[--s].nextSibling;e.insertBefore(n[l++],t[o++].nextSibling),e.insertBefore(n[--i],f),t[s]=n[i]}else{if(!u){u=new Map;let d=l;for(;d<i;)u.set(n[d],d++)}const f=u.get(t[o]);if(f!=null)if(l<f&&f<i){let d=o,a=1,x;for(;++d<s&&d<i&&!((x=u.get(t[d]))==null||x!==f+a);)a++;if(a>f-l){const _=t[o];for(;l<f;)e.insertBefore(n[l++],_)}else e.replaceChild(n[l++],t[o++])}else o++;else t[o++].remove()}}}const se="_$DX_DELEGATE";function De(e,t,n,r={}){let s;return Ee(i=>{s=i,t===document?e():v(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{s(),t.textContent=""}}function S(e,t,n,r){let s;const i=()=>{const l=document.createElement("template");return l.innerHTML=e,l.content.firstChild},o=()=>(s||(s=i())).cloneNode(!0);return o.cloneNode=o,o}function we(e,t=window.document){const n=t[se]||(t[se]=new Set);for(let r=0,s=e.length;r<s;r++){const i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,Ie))}}function ie(e,t){t==null?e.removeAttribute("class"):e.className=t}function J(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const s=n[0];e.addEventListener(t,n[0]=i=>s.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function Ue(e,t,n){return D(()=>e(t,n))}function v(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return G(e,t,r,n);I(s=>G(e,t(),s,n),r)}function Ie(e){let t=e.target;const n=`$$${e.type}`,r=e.target,s=e.currentTarget,i=c=>Object.defineProperty(e,"target",{configurable:!0,value:c}),o=()=>{const c=t[n];if(c&&!t.disabled){const u=t[`${n}Data`];if(u!==void 0?c.call(t,u,e):c.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},l=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const c=e.composedPath();i(c[0]);for(let u=0;u<c.length-2&&(t=c[u],!!o());u++){if(t._$host){t=t._$host,l();break}if(t.parentNode===s)break}}else l();i(r)}function G(e,t,n,r,s){for(;typeof n=="function";)n=n();if(t===n)return n;const i=typeof t,o=r!==void 0;if(e=o&&n[0]&&n[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(t=t.toString(),t===n))return n;if(o){let l=n[0];l&&l.nodeType===3?l.data!==t&&(l.data=t):l=document.createTextNode(t),n=P(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||i==="boolean")n=P(e,n,r);else{if(i==="function")return I(()=>{let l=t();for(;typeof l=="function";)l=l();n=G(e,l,n,r)}),()=>n;if(Array.isArray(t)){const l=[],c=n&&Array.isArray(n);if(z(l,t,n,s))return I(()=>n=G(e,l,n,r,!0)),()=>n;if(l.length===0){if(n=P(e,n,r),o)return n}else c?n.length===0?le(e,l,r):Re(e,n,l):(n&&P(e),le(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=P(e,n,r,t);P(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function z(e,t,n,r){let s=!1;for(let i=0,o=t.length;i<o;i++){let l=t[i],c=n&&n[e.length],u;if(!(l==null||l===!0||l===!1))if((u=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))s=z(e,l,c)||s;else if(u==="function")if(r){for(;typeof l=="function";)l=l();s=z(e,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||s}else e.push(l),s=!0;else{const f=String(l);c&&c.nodeType===3&&c.data===f?e.push(c):e.push(document.createTextNode(f))}}return s}function le(e,t,n=null){for(let r=0,s=t.length;r<s;r++)e.insertBefore(t[r],n)}function P(e,t,n,r){if(n===void 0)return e.textContent="";const s=r||document.createTextNode("");if(t.length){let i=!1;for(let o=t.length-1;o>=0;o--){const l=t[o];if(s!==l){const c=l.parentNode===e;!i&&!o?c?e.replaceChild(s,l):e.insertBefore(s,n):c&&l.remove()}else i=!0}}else e.insertBefore(s,n);return[s]}const Oe="/PrescriptText/assets/wasm_bg-Co5Mh2hg.wasm",Be=async(e={},t)=>{let n;if(t.startsWith("data:")){const r=t.replace(/^data:.*?base64,/,"");let s;if(typeof Buffer=="function"&&typeof Buffer.from=="function")s=Buffer.from(r,"base64");else if(typeof atob=="function"){const i=atob(r);s=new Uint8Array(i.length);for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o)}else throw new Error("Cannot decode base64-encoded data URL");n=await WebAssembly.instantiate(s,e)}else{const r=await fetch(t),s=r.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&s.startsWith("application/wasm"))n=await WebAssembly.instantiateStreaming(r,e);else{const i=await r.arrayBuffer();n=await WebAssembly.instantiate(i,e)}}return n.instance.exports};function Me(e,t){const n=h.gen_cursor_data(e,t);var r=te(n[0],n[1]).slice();return h.__wbindgen_free(n[0],n[1]*1,1),r}function Ne(e,t,n){const r=e.codePointAt(0);ee(r);const s=h.gen_data(r,t,n);var i=te(s[0],s[1]).slice();return h.__wbindgen_free(s[0],s[1]*1,1),i}function ke(e){const t=e.codePointAt(0);return ee(t),h.is_available(t)!==0}function Fe(e,t){const n=e.codePointAt(0);ee(n);const r=h.roll_glyph(n,t);var s=Ge(r[0],r[1]).slice();return h.__wbindgen_free(r[0],r[1]*4,4),s}function oe(){let e,t;try{const n=h.roll_random();return e=n[0],t=n[1],be(n[0],n[1])}finally{h.__wbindgen_free(e,t,1)}}function je(){return Xe(function(e,t){globalThis.crypto.getRandomValues(te(e,t))},arguments)}function Ve(e,t){return be(e,t)}function We(){const e=h.__wbindgen_externrefs,t=e.grow(4);e.set(0,void 0),e.set(t+0,void 0),e.set(t+1,null),e.set(t+2,!0),e.set(t+3,!1)}function He(e){const t=h.__externref_table_alloc();return h.__wbindgen_externrefs.set(t,e),t}function ee(e){if(typeof e=="number"&&(e>=1114112||e>=55296&&e<57344))throw new Error(`expected a valid Unicode scalar value, found ${e}`)}function Ge(e,t){e=e>>>0;const n=qe(),r=[];for(let s=e;s<e+4*t;s+=4)r.push(h.__wbindgen_externrefs.get(n.getUint32(s,!0)));return h.__externref_drop_slice(e,t),r}function te(e,t){return e=e>>>0,ye().subarray(e/1,e/1+t)}let L=null;function qe(){return(L===null||L.buffer.detached===!0||L.buffer.detached===void 0&&L.buffer!==h.memory.buffer)&&(L=new DataView(h.memory.buffer)),L}function be(e,t){return e=e>>>0,Je(e,t)}let N=null;function ye(){return(N===null||N.byteLength===0)&&(N=new Uint8Array(h.memory.buffer)),N}function Xe(e,t){try{return e.apply(this,t)}catch(n){const r=He(n);h.__wbindgen_exn_store(r)}}let F=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});F.decode();const Ye=2146435072;let K=0;function Je(e,t){return K+=t,K>=Ye&&(F=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),F.decode(),K=t),F.decode(ye().subarray(e,e+t))}let h;function Ke(e){h=e}URL=globalThis.URL;const A=await Be({"./wasm_bg.js":{__wbg_getRandomValues_2a91986308c74a93:je,__wbindgen_init_externref_table:We,__wbindgen_cast_0000000000000001:Ve}},Oe),Qe=A.memory,ze=A.gen_cursor_data,Ze=A.gen_data,et=A.is_available,tt=A.roll_glyph,nt=A.roll_random,rt=A.__wbindgen_exn_store,st=A.__externref_table_alloc,it=A.__wbindgen_externrefs,lt=A.__wbindgen_free,ot=A.__externref_drop_slice,pe=A.__wbindgen_start,ct=Object.freeze(Object.defineProperty({__proto__:null,__externref_drop_slice:ot,__externref_table_alloc:st,__wbindgen_exn_store:rt,__wbindgen_externrefs:it,__wbindgen_free:lt,__wbindgen_start:pe,gen_cursor_data:ze,gen_data:Ze,is_available:et,memory:Qe,roll_glyph:tt,roll_random:nt},Symbol.toStringTag,{value:"Module"}));Ke(ct);pe();var at=S("<canvas class=pxcanvas>");const ut=e=>{let t;const n=()=>e.scale??4,r=()=>e.alpha??255,s=()=>{let o="";return[...e.children].forEach(l=>{ke(l)?o+=l:o+=" "}),o},i=()=>{const o=t.getContext("2d");o.imageSmoothingEnabled=!1;const l=s().length,c=5*n(),u=9*n(),f=1*n(),d=l*c+f*(l-1),a=u;t.width=d,t.height=a,o.clearRect(0,0,d,a),[...e.children].forEach((x,_)=>{let m=Ne(x,n(),r());x=="|"&&(m=Me(n(),r()));const y=new ImageData(new Uint8ClampedArray(m),c,u);o.putImageData(y,_*c+_*f,0)}),o.shadowColor="rgba(80,180,255,0.8)",o.shadowBlur=8,o.drawImage(t,0,0)};return fe(i),X(i),(()=>{var o=at();J(o,"pointerleave",e.onPointerLeave),J(o,"pointerenter",e.onPointerEnter),J(o,"click",e.onClick,!0);var l=t;return typeof l=="function"?Ue(l,o):t=o,o})()};we(["click"]);const R=e=>{const[t,n]=E(e.initialize??""),r=()=>e.children,s=()=>e.wait??0,i=()=>e.scale??4,o=()=>e.maxPerRoll??10,l=()=>e.fillFirst??!0,c=async()=>{n(e.initialize??"");const u=r().length;if(s()!=0){let f=Array.from(t());const d=Date.now()+s()*1e3;for(;d>Date.now();){for(let a=0;u>a;a++)f[a]=oe();n(f.join("")),await new Promise(a=>setTimeout(a,0))}}for(let f=0;u>f;f++){const d=Fe(r()[f],o());let a=Array.from(t());for(let x of d){if(a[f]=x,f+1!=u)for(let _=f+1;u>_;_++)l()&&(a[_]=oe());n(a.join("")),await new Promise(_=>setTimeout(_,10))}}};return X(ue([e.trigger?e.trigger:()=>{}],()=>{c()})),p(ut,{get scale(){return i()},get alpha(){return e.alpha},get onClick(){return e.onClick},get onPointerEnter(){return e.onPointerEnter},get onPointerLeave(){return e.onPointerLeave},get children(){return t()}})};var ft=S("<div><textarea id=hidden-input>"),dt=S("<div id=view-box>"),gt=S("<div><span>"),ht=S("<span class=view-cursor>"),_t=S("<div>");const mt=e=>{const[t,n]=E(""),[r,s]=E(!0),[i,o]=E(!1),[l,c]=E(0),u=()=>{l()==0&&(document.getElementById("hidden-input").focus(),o(!0))},f=()=>{o(!1)},d=a=>{a!=null&&(n(a),e.onInput(a))};return fe(async()=>{for(;;)s(a=>!a),await new Promise(a=>setTimeout(a,1e3))}),X(ue(e.trigger,a=>{a?c(10):(c(0),t().length!=0&&u())})),(()=>{var a=ft(),x=a.firstChild;return x.$$input=_=>d(_.target.value),x.$$focusout=f,v(a,(()=>{var _=Q(()=>!!(t()||i()));return()=>_()?(()=>{var m=dt();return v(m,()=>t().split(`
`).map((y,U)=>U+1==t().split(`
`).length?(()=>{var T=gt(),ne=T.firstChild;return v(ne,p(R,{get maxPerRoll(){return l()},get fillFirst(){return l()==10},initialize:y,get trigger(){return e.trigger},get scale(){return e.scale},onClick:u,children:y})),v(T,(()=>{var ve=Q(()=>!!i());return()=>ve()?(()=>{var re=ht();return v(re,p(R,{get maxPerRoll(){return l()},get fillFirst(){return l()==10},get scale(){return e.scale},onClick:u,get alpha(){return r()?120:60},children:"|"})),re})():[]})(),null),I(()=>ie(ne,y.length==0?"nothing":"")),T})():(()=>{var T=_t();return v(T,p(R,{get maxPerRoll(){return l()},get fillFirst(){return l()==10},initialize:y,get trigger(){return e.trigger},get scale(){return e.scale},onClick:u,children:y})),T})())),m})():p(R,{get scale(){return e.scale},maxPerRoll:5,onClick:u,get alpha(){return r()?120:60},children:"_Click here._"})})(),null),I(()=>ie(a,l()==0?"input-type":"")),a})()};we(["focusout","input"]);var wt=S("<div class=btn>");const k=e=>{const[t,n]=E(!1);return(()=>{var r=wt();return v(r,p(R,{get trigger(){return e.trigger},get onClick(){return e.onClick},get maxPerRoll(){return e.maxPerRoll},get wait(){return e.wait},get scale(){return e.scale},get alpha(){return t()?60:255},onPointerEnter:()=>n(!0),onPointerLeave:()=>n(!1),get children(){return e.children}})),r})()};var bt=S("<div class=content><header></header><div class=view></div><footer>");const yt=()=>{const[e,t]=E(!1),[n,r]=E(""),s=()=>{!e()&&n().length!=0&&t(!0)},i=()=>{e()&&n().length!=0&&t(!1)},o=()=>{const c=document.createElement("a");c.href="https://github.com/TundraClimate",c.click()},l=()=>{const c=document.getElementById("view-box");if(c==null)return;const u=Array.from(c.querySelectorAll("canvas")),f=Math.max(...u.map(m=>m.width)),d=u.reduce((m,y)=>m+y.height,0),a=document.createElement("canvas");a.width=f,a.height=d;const x=a.getContext("2d");let _=0;for(const m of u){const y=(f-m.width)/2;x.drawImage(m,y,_),_+=m.height}a.toBlob(m=>{if(m!=null){const y=URL.createObjectURL(m),U=document.createElement("a");U.href=y,U.download="prescript.png",U.click(),URL.revokeObjectURL(y)}})};return(()=>{var c=bt(),u=c.firstChild,f=u.nextSibling,d=f.nextSibling;return v(u,p(R,{scale:8,maxPerRoll:5,children:"_Make Your Prescript._"})),v(f,p(mt,{scale:8,trigger:e,onInput:a=>r(a)})),v(d,p(k,{scale:3,maxPerRoll:10,wait:3,onClick:o,children:"DEV:Tundra"}),null),v(d,(()=>{var a=Q(()=>!!e());return()=>a()?p(k,{scale:3,onClick:i,children:"_CLEAR._"}):p(k,{scale:3,onClick:s,children:"_Take THIS._"})})(),null),v(d,p(k,{scale:3,maxPerRoll:10,wait:3,onClick:l,children:"Download"}),null),c})()};De(()=>p(yt,{}),document.getElementById("root"));
